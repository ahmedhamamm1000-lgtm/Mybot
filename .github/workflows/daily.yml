name: Triple Daily Bot
on:
  schedule:
    - cron: '0 7 * * *'  # 9 ุตุจุงุญุงู (ุชูููุช ูุตุฑ) - 20 ุฑุณุงูุฉ
    - cron: '0 14 * * *' # 4 ุนุตุฑุงู (ุชูููุช ูุตุฑ) - 10 ุฑุณุงุฆู
    - cron: '0 22 * * *' # 12 ูุณุงุกู (ุชูููุช ูุตุฑ) - ุฃุฐูุงุฑ
  workflow_dispatch:

jobs:
  broadcast:
    runs-on: ubuntu-latest
    steps:
      - name: Send Messages
        run: |
          TOKEN="8547376425:AAGHy5gDX7gaNI9c9r2L4mdvvu7YxIObyEk"
          CHANNEL="@ุฃูุชุจ_ููุฒุฑ_ููุงุชู_ููุง" # <--- ุบูุฑ ูุฐุง ููุท
          
          HOUR=$(date +%H)
          
          if [ "$HOUR" == "07" ]; then
            for i in {1..20}; do
              RES=$(curl -s "https://api.aladhan.com/v1/ayah/random/ar.alafasy")
              TXT=$(echo $RES | jq -r '.data.text')
              SUR=$(echo $RES | jq -r '.data.surah.name')
              curl -s -X POST "https://api.telegram.org/bot$TOKEN/sendMessage" -d "chat_id=$CHANNEL" -d "parse_mode=HTML" -d "text=โ๏ธ <b>ูุฑุฏ ุงูุตุจุงุญ ($i/20)</b>%0A%0A$TXT%0A%0A๐ ุณูุฑุฉ $SUR"
              sleep 2
            done
          elif [ "$HOUR" == "14" ]; then
            for i in {1..10}; do
              RES=$(curl -s "https://api.aladhan.com/v1/ayah/random/ar.alafasy")
              TXT=$(echo $RES | jq -r '.data.text')
              curl -s -X POST "https://api.telegram.org/bot$TOKEN/sendMessage" -d "chat_id=$CHANNEL" -d "parse_mode=HTML" -d "text=๐ค๏ธ <b>ูุฑุฏ ุงูุนุตุฑ ($i/10)</b>%0A%0A$TXT"
              sleep 2
            done
          else
            # ุฃุฐูุงุฑ ุงููุณุงุก
            curl -s -X POST "https://api.telegram.org/bot$TOKEN/sendMessage" -d "chat_id=$CHANNEL" -d "parse_mode=HTML" -d "text=๐ <b>ุฃุฐูุงุฑ ุงููุณุงุก</b>%0A%0Aุฃุณุชุบูุฑ ุงููู ูุฃุชูุจ ุฅููู %0A ูุง ุญูู ููุง ููุฉ ุฅูุง ุจุงููู %0A ุณุจุญุงู ุงููู ูุจุญูุฏู"
          fi
